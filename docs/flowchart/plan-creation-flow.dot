digraph PlanCreationFlow {
    rankdir=TB;
    bgcolor="white";
    fontname="Arial";
    node [fontname="Arial", fontsize=11];
    edge [fontname="Arial", fontsize=9];
    nodesep=0.8;
    ranksep=0.5;
    
    // Start/End
    node [shape=circle, style=filled, fillcolor="#C8E6C9", color="#388E3C", width=0.7, fixedsize=true];
    start [label="Start"];
    end_ok [label="OK"];
    
    // Decisions
    node [shape=diamond, fillcolor="#FFF9C4", color="#FBC02D", width=1.2, height=0.9, fixedsize=false];
    d_cont [label="Pilih\nContainer?"];
    d_item [label="Ada\nItem?"];
    d_more [label="Tambah\nLagi?"];
    d_calc [label="Auto\nCalc?"];
    
    // Input phase
    node [shape=box, style="rounded,filled", fillcolor="#E3F2FD", color="#1976D2", width=1.8, height=0.5];
    p1 [label="Terima Request"];
    p2 [label="Validasi Workspace"];
    
    // Container handling
    node [fillcolor="#E8F5E9", color="#388E3C"];
    p3 [label="Fetch Container"];
    p4 [label="Input Manual"];
    p5 [label="Snapshot Container"];
    p6 [label="Simpan Plan"];
    
    // Item handling
    node [fillcolor="#FFF3E0", color="#F57C00"];
    p7 [label="Fetch Product"];
    p8 [label="Snapshot Dimensi"];
    p9 [label="Simpan Item"];
    
    // Final
    node [fillcolor="#E3F2FD", color="#1976D2"];
    p10 [label="Kalkulasi Packing"];
    p11 [label="Return Plan"];
    
    // Spacers
    node [shape=point, width=0, height=0];
    inv1 [style=invis];
    inv2 [style=invis];
    
    // Flow
    start -> p1 -> p2 -> d_cont;
    
    // Container branch
    {rank=same; p3; inv1; p4}
    d_cont -> p3 [label="Ya"];
    d_cont -> p4 [label="Tidak"];
    p3 -> inv1 [style=invis];
    inv1 -> p4 [style=invis];
    p3 -> p5;
    p4 -> p5;
    p5 -> p6 -> d_item;
    
    // Item branch
    {rank=same; p7; inv2; d_calc}
    d_item -> p7 [label="Ya"];
    d_item -> d_calc [label="Tidak"];
    p7 -> inv2 [style=invis];
    inv2 -> d_calc [style=invis];
    
    // Item loop
    p7 -> p8 -> p9 -> d_more;
    d_more -> p7 [label="Ya"];
    d_more -> d_calc [label="Tidak"];
    
    // Final calc decision
    {rank=same; p10; p11}
    d_calc -> p10 [label="Ya"];
    d_calc -> p11 [label="Tidak"];
    p10 -> p11;
    p11 -> end_ok;
}
